---
title: Wealth Inequality in Baltimore City and Baltimore County
author: Olivia Borgula
date: 02/29/2024
---

#rsw comments - Olivia - You had a very nice conclusion to this notebook. The layout of this notebook was easy to follow. There were a few problems, however.
#1: file paths to the data directed me to your hard drive. 
Your code failed at the first chunk because it was directing R to grab data from your laptop. Make your file paths so anyone downloading your notebook at data from github can do it from a single folder.

#2: no explanation of the data. where did this data come from? what are the definitions of the columns? I have no idea where you got these files. And therefore I can't assess whether this is a good project or not.

#3: Failure to clean your data. The column headings were a problem for poverty_status and that caused subsequent code failures. Clean your data using janitor::clean_names. These column headings are an unnecessary nightmare


So your notebook failed to run. See my comments #rsw below and fix this for the next step in the process. 



**INTRODUCTION**
Baltimore County and Baltimore City are considered separate jurisdictions despite once being the same. While Baltimore City was once majority white in the 1960s, white flight out of the city and into what is now Baltimore County left the city with economic instability. But gentrification starting in the 2010s has led to an increase in white people in Baltimore City. How has this impacted wealth inequality in the two areas? 

First, load libraries, turn off scientific notation and upload datasets
```{r}
#load libraries
library(tidyverse)
library(janitor)
library(formattable)

#turn off scientific notation
options(scipen=999)

#upload datasets 

medians_2012_2022 <- read_csv("data/medians_2012_2022.csv")%>%
  clean_names()

poverty_status_2 <- read_csv("data/poverty_status_2.csv")%>%
  clean_names()

poverty_race <- read_csv("data/poverty_race_7.csv")%>%
  clean_names()

poverty_race <- read_csv("data/poverty_race_7.csv")%>%
  clean_names()
```

**Part 1**

What was the median household income in Baltimore City, Baltimore County and Maryland in 2022?
```{r}
#create a pivot table displaying the median household income in each location for 2022
med_summary <- medians_2012_2022 %>%
  filter(year %in% c("2022"))

View(med_summary)

#Findings for 2022 median household income:
#Baltimore City: $55,198
#Baltimore County: $86,526
#Maryland: $94,991
```

Find the percent change in median household income from 2012 to 2022 in Baltimore County vs. Baltimore City

```{r}
#First make a pivot table to more easily identify values
decade_values <- medians_2012_2022 %>% 
  filter(year %in% c("2022"))
  decade_values_clean <- gather(decade_values, key = "Location", value = "Estimate", -1)%>%
  mutate(Percent = ((55198 - 39241)/39241))%>%
  mutate(pct_change_baltcounty = ((86526 - 62444)/62444))
  


#rsw - add this calculation to the table using mutate

#Find percent change for Baltimore City between 2012 and 2022
percent((55198 - 39241)/39241)

#rsw - add this calculation to the table using mutate

#Find percent change for Baltimore County between 2012 and 2022
percent((86526 - 62444)/62444)

#Percent change

```


Visualize the median household income in Baltimore City and Baltimore County over that same time period

#rsw - nice looking chart but it's misssing your byline and date

```{r}
ggplot(medians_2012_2022, aes(x=year)) +
  geom_line(aes(y=balt_city), color = "blue", show.legend = TRUE) +
  geom_line(aes(y=balt_county), color = "green")+
  geom_line(aes(y=maryland), color = "red")+
  labs(title = "Median Household Income from 2012-2022", 
       caption = "Source: U.S. Census Bureau",
       y="Income",
       x="Year")
```

How many people have poverty status (are below the poverty line) in Baltimore City, Baltimore County and Maryland?

```{r}
#Create a pivot table and filter out values from large census dataset
poverty_number <- poverty_status_2 %>%
  select(`Label (Grouping)`, `Maryland!!Below poverty level!!Estimate`, `Baltimore County, Maryland!!Below poverty level!!Estimate`, `Baltimore city, Maryland!!Below poverty level!!Estimate`)%>%
  filter(`Label (Grouping)` %in% c("Population for whom poverty status is determined"))
View(poverty_number)


#rsw what does this mean? spell it out... "below poverty line of XXXX"

#Findings:
#Maryland: 618,372 people 
#Baltimore County: 81,052 people
#Baltimore City: 127,135 people
```

Make a pivot table with the percent of people below the poverty line in 2022 compared to their total population for each location

#rsw this code failed: Error in select(., `Label (Grouping)`, `Maryland!!Percent below poverty level!!Estimate`,  :

```{r}
poverty_pct <- poverty_status_2 %>%
  select(label_grouping, maryland_percent_below_poverty_level_estimate, baltimore_city_maryland_percent_below_poverty_level_estimate, baltimore_county_maryland_percent_below_poverty_level_estimate)%>%
  filter(label_grouping %in% c("Population for whom poverty status is determined"))
View(poverty_pct)
```

Reorder columns and rows to make it easier to create bar graph


```{r}
# Reshape the data
reshaped_pct <- gather(poverty_pct, key = "Location", value = "Percent", -1)
reshaped_pct <- reshaped_pct[, -1]
reshaped_pct <- reshaped_pct %>%
  mutate(
    new_names = case_when(
      Location == "maryland_percent_below_poverty_level_estimate" ~ "Maryland",
      Location == "baltimore_city_maryland_percent_below_poverty_level_estimate" ~ "Baltimore City",
      Location == "baltimore_county_maryland_percent_below_poverty_level_estimate" ~ "Baltimore County"
    )
  )
View(reshaped_pct)
```

Visualize this data
```{r}
reshaped_pct %>%
  ggplot() +
  geom_col(aes(x = new_names, y = Percent)) +
  theme_minimal() +
  labs(
    title = "Percent of Population Below Poverty Line in Baltimore City, Baltimore County, and Maryland",
    x = "Location",
    y = "Percent",
    caption = "Source: U.S. Census Bureau"
  )
```
Add a column showing the percentage below the poverty line compared to total population in 2022 by race for each place 
```{r}
#rsw - this was clever.
poverty_race[is.na(poverty_race)] <- 0

poverty_race <- poverty_race %>%
  mutate(pct_md = percent(md_poverty/md_total))%>%
  mutate(pct_baltcounty = percent(baltcounty_poverty/baltcounty_total))%>%
  mutate(pct_baltcity = percent(baltcity_poverty/baltcounty_total))
  
```

#rsw - very good conclusion

**Conclusion**
Baltimore County's median household income has been consistently higher than Baltimore City's median household income in the 10 years from 2012 to 2022. While Baltimore County's median household income has been comparable to the state of Maryland, Baltimore City is significantly less than both values. In 2022, Baltimore County had a median household income of $86,526 and Maryland had a median household income of $94,991. Baltimore City, on the other hand, had a median household income of $55,198. Baltimore City also had a higher proportion of people below the poverty line compared to Maryland and Baltimore County, with individuals who identify as Black or African American constituting the largest percent of people below the poverty line by race. Around 37% of Black or African American people are below the poverty line, according to data from the U.S. Census Bureau. In Baltimore County and Maryland, however, those who listed two or more other races or those who identified as Hispanic or Latino, were the highest percent of people below the poverty line by race, respectively.
